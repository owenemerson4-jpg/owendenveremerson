<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>The Portfolio of Owen Denver Emerson</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  html, body {
    height: 100%;
    width: 100%;
    font-family: 'IBM Plex Sans', 'Inter', system-ui, Arial, sans-serif;
    overflow: hidden;
    background: linear-gradient(to bottom, #bfe5ff 0%, #eaf7ff 80%);
  }

  /* --- CLOUDS --- */
  .cloud { position:absolute; height:16px; background:rgba(255,255,255,0.9); z-index:1; animation:float 40s linear infinite; }
  .cloud::before, .cloud::after { content:""; position:absolute; height:100%; background:inherit; }
  .cloud.small { top:8%; left:-20%; width:120px; animation-duration:38s; }
  .cloud.small::before { left:140px; width:80px; }
  .cloud.small::after { left:240px; width:60px; }
  .cloud.large { top:18%; left:-30%; width:180px; animation-duration:52s; animation-delay:-6s; }
  .cloud.large::before { left:200px; width:100px; }
  .cloud.large::after { left:320px; width:80px; }
  @keyframes float { from { transform: translateX(0); } to { transform: translateX(130vw); } }

  /* --- FOLDER STRUCTURE --- */
  .folder-back {
    position:absolute; bottom:0; left:0; width:100%; height:86%;
    background:linear-gradient(to bottom,#e9d79a 0%,#e2c97f 100%);
    z-index:2; border-top:2px solid rgba(0,0,0,0.12);
  }

  .paper {
    position:absolute; top:15%; left:0; width:100%; height:5%;
    background:#fff; z-index:3; border-top:1px solid rgba(0,0,0,0.1);
    border-bottom:1px solid rgba(0,0,0,0.1);
  }

  .folder-front {
    position:absolute; bottom:0; left:0; width:100%; top:20%;
    background:linear-gradient(to bottom,#f5e0a1 0%,#f2d58b 100%);
    z-index:4; border-top:2px solid rgba(0,0,0,0.2);
    display:flex; flex-direction:row; align-items:center; justify-content:flex-start;
    padding:0 5%;
  }

  /* --- CARD STACK --- */
  .card-stack {
    margin-left: auto;
    flex:0 0 26%;
    max-width:320px;
    aspect-ratio:3/4;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    z-index:6;
    perspective:1000px;
  }
  .card {
    position:absolute;
    width:100%; height:100%;
    border:2px solid rgba(0,0,0,0.1);
    background:#fff;
    display:flex; align-items:center; justify-content:center;
    transition:transform 0.6s ease, opacity 0.6s ease;
    will-change:transform, opacity;
  }
  .card img, .card video { width:100%; height:100%; object-fit:cover; pointer-events:none; user-select:none; }
  .card-stack .card:nth-child(1){ transform:translateY(0px) scale(1); z-index:3; }
  .card-stack .card:nth-child(2){ transform:translateY(8px) scale(0.97); z-index:2; }
  .card-stack .card:nth-child(3){ transform:translateY(16px) scale(0.94); z-index:1; }
  .card-stack:hover .card:nth-child(1){ transform:translateY(-4px) scale(1.02); }

  @media (max-width:900px){ .card-stack{ width:34%; } }
  @media (max-width:480px){
    .folder-front { flex-direction:column; align-items:center; }
    .card-stack { width:80%; margin-top:4%; margin-left:0; }
  }

  /* --- TABS --- */
  .tabs { position:absolute; top:6%; left:0; width:100%; display:flex; gap:1%; padding-left:2%; align-items:flex-end; z-index:5; }
  .tab { flex:0 0 18%; height:8vh; display:flex; align-items:center; justify-content:center;
         border:2px solid rgba(0,0,0,0.18); font-weight:700; letter-spacing:0.05em; text-transform:uppercase;
         cursor:pointer; transition:background 0.25s ease, transform 0.15s ease; border-radius:0 !important; }
  .tab button{ all:unset; width:100%; height:100%; text-align:center; cursor:pointer; border-radius:0 !important; }
  .tab.manila{ background:#f7e9b8; color:#3a2f09; }
  .tab.green{ background:#cfeec7; color:#1f4d2b; }
  .tab.pink{ background:#f7cfcf; color:#5a3131; }
  .tab:hover{ transform:translateY(-2px); } .tab:active{ transform:translateY(0); }

  /* --- P5 CANVAS POSITIONING (unchanged) --- */
  #p5-holder {
    position: absolute;
    z-index: 8;
    pointer-events: none;
    left: 2%;
    top: 21%;
    width: 60%;
    transform-origin: top left;
    transform: scale(0.85);
  }
  canvas.p5Canvas {
    width: 100% !important;
    height: auto !important;
    pointer-events: auto !important;
  }

  /* --- INDEPENDENT GREEN TEXT BOX (separate element) --- */
  .green-text-box {
    position: absolute;
    left: 2%;
    top: 55%;                 /* lower on the manila folder */
    width: 58%;
    background: #cfeec7;
    border: 2px solid #aac3a3;
    z-index: 5;               /* same visual layer as folder/tabs; below the p5 (z:8) */
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.4em 0.6em;
  }
  .green-text-box span {
    font-family: 'IBM Plex Sans', monospace;
    font-size: 1.1rem;
    font-weight: 600;
    color: #1f4d2b;
    text-align: center;
    letter-spacing: 0.02em;
    text-shadow:
      1px 1px 1px rgba(173, 216, 230, 0.6),
      -1px -1px 1px rgba(152, 251, 152, 0.6),
      0 0 2px rgba(255, 255, 255, 0.4);
  }

  /* --- PORTRAIT LOCK FALLBACK --- */
  @media screen and (max-width:900px) and (orientation:landscape){
    body::before{
      content:"Please rotate your device upright";
      position:fixed; top:0; left:0; width:100vw; height:100vh;
      background:linear-gradient(to bottom,#bfe5ff 0%,#eaf7ff 80%);
      color:#1e1e1e; font-family:'Inter',sans-serif; font-weight:600;
      letter-spacing:0.03em; display:flex; align-items:center; justify-content:center;
      text-align:center; font-size:1.15rem; text-shadow:0 1px 3px rgba(255,255,255,0.6);
      z-index:9999;
    }
  }
</style>
</head>

<body>
  <!-- Clouds -->
  <div class="cloud small" aria-hidden="true"></div>
  <div class="cloud large" aria-hidden="true"></div>

  <!-- Folder layers -->
  <div class="folder-back" aria-hidden="true"></div>
  <div class="tabs">
    <div class="tab manila"><button>ABOUT</button></div>
    <div class="tab green"><button>WORK</button></div>
    <div class="tab pink"><button>CONTACT</button></div>
  </div>
  <div class="paper" aria-hidden="true"></div>

  <!-- p5 sketch holder (unchanged) -->
  <div id="p5-holder"></div>

  <!-- âœ… Independent green text box (no relation to p5) -->
  <div class="green-text-box">
    <span>...is using multimedia design to tell memorable stories</span>
  </div>

  <!-- Folder front and card stack -->
  <div class="folder-front">
    <div class="card-stack">
      <div class="card"><img src="my_homepage/img1.png" alt="Card 1"></div>
      <div class="card"><video src="my_homepage/HeartSpinWebsite.mp4" muted autoplay loop playsinline></video></div>
      <div class="card"><img src="my_homepage/img2.png" alt="Card 2"></div>
      <div class="card"><img src="my_homepage/img3.png" alt="Card 3"></div>
    </div>
  </div>

  <!-- p5 library -->
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>

  <!-- FULL p5 sketch (exactly as in your stable version) -->
  <script>
  let gridTex;
  let textLayer;
  let sphereDetail = 50;
  let autoRotate = 0;

  // Smooth layout targets
  let targetRadius = 0;
  let targetSphereCX = 0;
  let radius = 0;
  let sphereCX = 0;

  function setup() {
    const aspectRatio = 0.25;
    const cnv = createCanvas(windowWidth, windowWidth * aspectRatio, WEBGL);
    cnv.parent("p5-holder");
    setAttributes('alpha', true);
    noStroke();

    // Grid texture for sphere
    gridTex = createGraphics(512, 256);
    gridTex.clear();
    drawGridTexture(gridTex);

    // Text layer
    textLayer = createGraphics(width, height);
    textLayer.pixelDensity(1);
    textLayer.clear();

    computeLayoutTargets();
    radius = targetRadius;
    sphereCX = targetSphereCX;
    updateTextLayer(radius, sphereCX);
  }

  function draw() {
    background('#f7cfcf');

    // Smoothly interpolate toward target layout values
    radius = lerp(radius, targetRadius, 0.08);
    sphereCX = lerp(sphereCX, targetSphereCX, 0.08);

    push();
    translate(-width / 2, 0, 0);

    autoRotate += 0.003;
    push();
    translate(sphereCX, 0, 0);
    const rotY = map(mouseX, 0, width, -PI, PI);
    const rotX = map(mouseY, 0, height, -PI / 2, PI / 2);
    rotateY(rotY + autoRotate);
    rotateX(rotX * 0.5);
    texture(gridTex);
    sphere(radius, sphereDetail, sphereDetail);
    pop();

    updateTextLayer(radius, sphereCX);
    image(textLayer, 0, -height / 2);
    pop();

    drawSphereOutline(radius);
    drawFrameOutline();
  }

  // ---------------- Layout + Scaling ----------------

  function computeLayoutTargets() {
    // Slightly smaller sphere relative to the text
    const baseScale = constrain(width / 900, 0.4, 1);
    targetRadius = height * 0.28 * baseScale;
    targetSphereCX = targetRadius + height * 0.14 * baseScale; // extra space before text to avoid overlap
  }

  // ---------------- Drawing helpers ----------------

  function drawSphereOutline(r) {
    const outlineColor = '#97717E';
    const cx = (r + height * 0.14);
    const cy = height / 2;
    const d = r * 2;

    push();
    resetMatrix();
    translate(-width / 2, -height / 2);
    noFill();

    for (let i = 4; i >= 1; i--) {
      const w = 1 + i * 1.8;
      const a = 10 + i * 3;
      stroke(redFromHex(outlineColor), greenFromHex(outlineColor), blueFromHex(outlineColor), a);
      strokeWeight(w);
      ellipse(cx, cy, d + i * 3, d + i * 3);
    }

    stroke(outlineColor);
    strokeWeight(3);
    ellipse(cx, cy, d, d);
    pop();
  }

  function drawFrameOutline() {
    push();
    resetMatrix();
    translate(-width / 2, -height / 2, 0);
    noFill();
    stroke('#97717E');
    strokeWeight(2);
    rect(0.5, 0.5, width - 3, height - 3);
    pop();
  }

  // ---------------- Color + Text ----------------

  function redFromHex(hex){ return parseInt(hex.slice(1,3), 16); }
  function greenFromHex(hex){ return parseInt(hex.slice(3,5), 16); }
  function blueFromHex(hex){ return parseInt(hex.slice(5,7), 16); }

  function updateTextLayer(r = 0, sCX = 0) {
    if (textLayer.width !== width || textLayer.height !== height) {
      textLayer.resizeCanvas(width, height);
    }
    textLayer.clear();

    const pastelColors = [
      '#97717E',
      [173, 216, 230],
      [152, 251, 152]
    ];

    textLayer.textAlign(textLayer.LEFT, textLayer.CENTER);
    textLayer.textFont('IBM Plex Sans, monospace');

    const baseText = "wen Denver Emerson";

    // Increase default font size for more fill
    const availableW = width - (sCX + r * 1.3);
    let fontSize = height * 1.0; // larger default
    textLayer.textSize(fontSize);
    let textW = textLayer.textWidth(baseText);

    // Scale down only if needed
    if (textW > availableW) {
      fontSize *= (availableW / textW) * 0.95;
      textLayer.textSize(fontSize);
    }

    // Position text start to avoid overlap
    const textStartX = sCX + r * 1.05; // cushion after sphere
    const baselineY = height / 2;

    // Iridescent glow outline
    pastelColors.forEach((rgb, idx) => {
      textLayer.stroke(rgb[0], rgb[1], rgb[2], 220);
      textLayer.strokeWeight(3);
      textLayer.noFill();
      textLayer.text(baseText, textStartX + idx * 0.6, baselineY + idx * 0.4);
    });

    // Outline and fill
    textLayer.stroke('#97717E');
    textLayer.strokeWeight(6);
    textLayer.noFill();
    textLayer.text(baseText, textStartX, baselineY);

    textLayer.noStroke();
    textLayer.fill(255);
    textLayer.text(baseText, textStartX, baselineY);
  }

  // ---------------- Grid texture ----------------

  function drawGridTexture(pg) {
    pg.background(255);
    pg.stroke('#c8b1b9');
    pg.strokeWeight(1.5);

    const colors = [
      color(255, 182, 193),
      color(173, 216, 230),
      color(152, 251, 152)
    ];

    for (let i = 0; i <= pg.width; i += pg.width / 12) {
      const c = colors[int((i / (pg.width / 12)) % 3)];
      pg.stroke(c);
      pg.line(i, 0, i, pg.height);
    }

    for (let j = 0; j <= pg.height; j += pg.height / 6) {
      const c = colors[int((j / (pg.height / 6)) % 3)];
      pg.stroke(c);
      pg.line(0, j, pg.width, j);
    }

    pg.stroke('#c8b1b9');
  }

  // ---------------- Resize ----------------

  function windowResized() {
    const aspectRatio = 0.25;
    resizeCanvas(windowWidth, windowWidth * aspectRatio);
    computeLayoutTargets();
    updateTextLayer(targetRadius, targetSphereCX);
  }
  </script>

  <!-- card stack animation -->
  <script>
  const stack = document.querySelector('.card-stack');
  let intervalTime = 4000;
  let lastTime = 0;

  function cycleCards() {
    const cards = stack.querySelectorAll('.card');
    if (cards.length <= 1) return;
    const top = cards[0];
    const second = cards[1];

    top.style.transform = 'translateX(110%) rotate(0deg)';
    top.style.opacity = '0';

    second.style.transform = 'translateY(0) scale(1)';
    second.style.zIndex = 3;

    for (let i = 2; i < cards.length; i++) {
      const y = 8 * (i - 1);
      const scale = 1 - 0.03 * (i - 1);
      cards[i].style.transform = `translateY(${y}px) scale(${scale})`;
      cards[i].style.zIndex = 3 - i;
    }

    setTimeout(() => {
      top.style.transition = 'none';
      const n = cards.length;
      top.style.transform = `translateY(${8 * (n - 1)}px) scale(${1 - 0.03 * (n - 1)})`;
      top.style.opacity = '1';
      top.style.zIndex = 1;
      stack.appendChild(top);
      void top.offsetWidth;
      top.style.transition = 'transform 0.6s ease, opacity 0.6s ease';
    }, 600);
  }

  function animationLoop(timestamp) {
    if (timestamp - lastTime >= intervalTime) {
      cycleCards();
      lastTime = timestamp;
    }
    requestAnimationFrame(animationLoop);
  }
  requestAnimationFrame(animationLoop);

  if (screen.orientation && screen.orientation.lock) {
    screen.orientation.lock('portrait').catch(() => {});
  }
  </script>
</body>
</html>
