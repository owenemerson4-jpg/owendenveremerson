<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Owen Denver Emerson Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>

  <style>
    :root {
      --color1: #c28d3c;
      --color2: #4d5941;
      --color3: #666954;
      --color4: #504223;
      --color5: #546e59;
      --color6: #72440a;
      --color7: #c8bf8f;
      --color8: #c28220;
    }

    body {
      margin: 0;
      font-family: "Cormorant Garamond Bold 700", serif;
      background: var(--color7);
      color: var(--color4);
      transition: background 1s, color 1s;
    }

    header {
      position: relative;
      text-align: center;
      background: var(--color3);
      padding: 4em 0;
      overflow: hidden;
      transition: background 1s;
    }

    header h1 {
      font-size: 2.4em;
      font-weight: 900;
      letter-spacing: 0.06em;
      position: relative;
      z-index: 10;
    }

    .theme-toggle {
      position: absolute;
      left: 1.5em;
      top: 50%;
      transform: translateY(-50%);
      width: 60px;
      height: 60px;
      cursor: pointer;
      z-index: 11;
      transition: transform 0.2s ease-in-out;
    }

    .theme-toggle:hover {
      transform: translateY(-50%) scale(1.1);
    }

    footer {
      text-align: center;
      padding: 1em 0;
      background: var(--color2);
      color: var(--color7);
      transition: background 1s, color 1s;
    }

    #p5-holder {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    body.dark-mode {
      background: #000;
      color: #fff;
    }

    body.dark-mode header {
      background: #000;
    }

    body.dark-mode footer {
      background: #111;
      color: #ccc;
    }

    @media (max-width: 600px) {
      header h1 { font-size: 1.8em; }
      .theme-toggle { width: 45px; height: 45px; }
    }
  </style>
</head>

<body>
  <header id="main-header">
    <img src="my_assets/39aPre.png"
         data-hover="my_assets/spiderlayer.png"
         data-alt="my_assets/39aPre.png"
         class="theme-toggle"
         id="themeToggle"
         alt="toggle theme" />

    <h1>Owen Denver Emerson</h1>

    <div id="p5-holder"></div>
  </header>

  <footer>&copy; 2025 Owen Denver Emerson</footer>

  <audio id="darkModeAudio" src="my_assets/classiccrickets.wav" loop></audio>

  <script>
    // --- THEME TOGGLE ---
    const body = document.body;
    const header = document.getElementById("main-header");
    const icon = document.getElementById("themeToggle");
    const audio = document.getElementById("darkModeAudio");
    let isDark = false;

    icon.addEventListener("mouseover", () => icon.src = icon.dataset.hover);
    icon.addEventListener("mouseout", () => icon.src = isDark ? icon.dataset.alt : "my_assets/39aPre.png");
    icon.addEventListener("click", () => {
      isDark = !isDark;
      icon.src = isDark ? icon.dataset.alt : "my_assets/39aPre.png";
      body.classList.toggle("dark-mode", isDark);

      // update p5 color palette
      updatePalette(isDark);

      if (isDark) {
        audio.play();
      } else {
        audio.pause();
        audio.currentTime = 0;
      }
    });

    // --- P5.js GENERATIVE HEADER ---
    let pg, shapes = [], colors = [], brightColors = [];
    let mediaAssets = [], videos = [];
    let lastChange = 0, fadeProgress = 0, fadeDuration = 2000;
    let nextChangeInterval = 5000; // will vary randomly between 4â€“8s
    let prevShapes = [];

    function preload() {
      // preload a few images and videos from my_assets
      for (let i = 1; i <= 4; i++) mediaAssets.push(loadImage(`my_homepage/img${i}.png`));
      for (let j = 1; j <= 2; j++) videos.push(createVideo([`my_homepage/vid${j}.mp4`]));
    }

    function setup() {
      const holder = document.getElementById("p5-holder");
      let cnv = createCanvas(holder.offsetWidth, holder.offsetHeight);
      cnv.parent(holder);
      clear();
      noStroke();

      colors = [
        color(194,141,60,95), color(77,89,65,95), color(102,105,84,95),
        color(80,66,35,95), color(84,110,89,95), color(114,68,10,95),
        color(200,191,143,95), color(194,130,32,95)
      ];

      brightColors = [
        color(255, 70, 70, 150), color(70, 170, 255, 150),
        color(50, 255, 130, 150), color(255, 240, 80, 150),
        color(255, 110, 200, 150)
      ];

      videos.forEach(v => { v.hide(); v.loop(); });
      generateShapes();
    }

    function draw() {
      clear();

      let now = millis();
      fadeProgress = constrain((now - lastChange) / fadeDuration, 0, 1);

      pg = createGraphics(width, height);
      pg.clear();

      for (let i = 0; i < shapes.length; i++) {
        let s1 = prevShapes[i] || shapes[i];
        let s2 = shapes[i];

        let x = lerp(s1.x, s2.x, fadeProgress);
        let y = lerp(s1.y, s2.y, fadeProgress);
        let w = lerp(s1.w, s2.w, fadeProgress);
        let h = lerp(s1.h, s2.h, fadeProgress);
        let c = lerpColor(s1.col, s2.col, fadeProgress);

        if (s2.img && random() < 0.5) {
          pg.imageMode(CENTER);
          pg.image(s2.img, x, y, w, h);
        } else if (s2.vid && random() < 0.3) {
          pg.imageMode(CENTER);
          pg.image(s2.vid, x, y, w, h);
        } else {
          pg.fill(c);
          if (s2.type === "circle") pg.circle(x, y, w);
          else if (s2.type === "ellipse") pg.ellipse(x, y, w, h);
          else if (s2.type === "square") pg.square(x, y, w);
          else pg.rect(x, y, w, h);
        }
      }

      image(pg, 0, 0);

      if (now - lastChange > nextChangeInterval) {
        nextChangeInterval = random(4000, 8000);
        prevShapes = shapes;
        generateShapes();
        lastChange = now;
      }
    }

    function generateShapes() {
      shapes = [];
      let shapeTypes = ["circle", "ellipse", "square", "rect"];
      for (let i = 0; i < 8; i+
